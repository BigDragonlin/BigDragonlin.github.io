(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{488:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"pnpm-与-npm-的关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-与-npm-的关系"}},[s._v("#")]),s._v(" pnpm 与 npm 的关系")]),s._v(" "),a("h2",{attrs:{id:"关系定位"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关系定位"}},[s._v("#")]),s._v(" 关系定位")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("pnpm 是 npm 的替代品，不是替代者")]),s._v("（仍需要 npm 生态）")]),s._v(" "),a("li",[s._v("pnpm 完全兼容 npm 的 "),a("code",[s._v("package.json")]),s._v(" 和 npm registry")]),s._v(" "),a("li",[s._v("pnpm 可以直接替换 npm 命令，学习成本低")])]),s._v(" "),a("h2",{attrs:{id:"命令对照"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令对照"}},[s._v("#")]),s._v(" 命令对照")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("npm 命令")]),s._v(" "),a("th",[s._v("pnpm 命令")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("code",[s._v("npm install")])]),s._v(" "),a("td",[a("code",[s._v("pnpm install")])])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("npm add react")])]),s._v(" "),a("td",[a("code",[s._v("pnpm add react")])])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("npm run dev")])]),s._v(" "),a("td",[a("code",[s._v("pnpm dev")])])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("npm test")])]),s._v(" "),a("td",[a("code",[s._v("pnpm test")])])])])]),s._v(" "),a("hr"),s._v(" "),a("h1",{attrs:{id:"pnpm-相比-npm-的核心优势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-相比-npm-的核心优势"}},[s._v("#")]),s._v(" pnpm 相比 npm 的核心优势")]),s._v(" "),a("h2",{attrs:{id:"_1-磁盘空间节省-最显著优势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-磁盘空间节省-最显著优势"}},[s._v("#")]),s._v(" 1. 磁盘空间节省（最显著优势）")]),s._v(" "),a("h3",{attrs:{id:"npm-的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-的问题"}},[s._v("#")]),s._v(" npm 的问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("项目A/node_modules/lodash/  (4.5MB)\n项目B/node_modules/lodash/  (4.5MB)  # 重复存储\n项目C/node_modules/lodash/  (4.5MB)  # 重复存储\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"pnpm-的解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-的解决方案"}},[s._v("#")]),s._v(" pnpm 的解决方案")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("~/.pnpm-store/\n  └── lodash@4.17.21/  (4.5MB)  # 只存一次\n\n项目A/node_modules/.pnpm/\n  └── lodash@4.17.21 → 硬链接到全局存储\n\n项目B/node_modules/.pnpm/\n  └── lodash@4.17.21 → 硬链接到全局存储（不占额外空间）\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"实际效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实际效果"}},[s._v("#")]),s._v(" 实际效果")]),s._v(" "),a("ul",[a("li",[s._v("100 个项目使用相同依赖，npm 占用 100 份空间")]),s._v(" "),a("li",[s._v("pnpm 只占用 1 份空间 + 极小的硬链接开销")]),s._v(" "),a("li",[a("strong",[s._v("节省 70-80% 磁盘空间")])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-安装速度更快"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装速度更快"}},[s._v("#")]),s._v(" 2. 安装速度更快")]),s._v(" "),a("h3",{attrs:{id:"性能对比-官方-benchmark"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能对比-官方-benchmark"}},[s._v("#")]),s._v(" 性能对比（官方 benchmark）")]),s._v(" "),a("p",[a("strong",[s._v("场景：安装 React 应用依赖")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("工具")]),s._v(" "),a("th",[s._v("首次安装")]),s._v(" "),a("th",[s._v("有缓存时")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("npm")]),s._v(" "),a("td",[s._v("51s")]),s._v(" "),a("td",[s._v("15s")])]),s._v(" "),a("tr",[a("td",[s._v("yarn")]),s._v(" "),a("td",[s._v("39s")]),s._v(" "),a("td",[s._v("-")])]),s._v(" "),a("tr",[a("td",[s._v("pnpm")]),s._v(" "),a("td",[s._v("24s ⚡")]),s._v(" "),a("td",[s._v("1.5s ⚡⚡⚡")])])])]),s._v(" "),a("h3",{attrs:{id:"为什么更快"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么更快"}},[s._v("#")]),s._v(" 为什么更快？")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("并行下载")]),s._v("：同时下载多个包")]),s._v(" "),a("li",[a("strong",[s._v("内容寻址存储")]),s._v("：已下载的包直接硬链接，不重新下载")]),s._v(" "),a("li",[a("strong",[s._v("增量安装")]),s._v("：只处理变更的依赖")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_3-解决幽灵依赖问题-phantom-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-解决幽灵依赖问题-phantom-dependencies"}},[s._v("#")]),s._v(" 3. 解决幽灵依赖问题（Phantom Dependencies）")]),s._v(" "),a("h3",{attrs:{id:"npm-的问题-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-的问题-2"}},[s._v("#")]),s._v(" npm 的问题")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json 中没有声明 lodash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"some-package"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这个包依赖 lodash")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 但你可以直接使用（危险！）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" _ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash'")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// npm 允许，pnpm 禁止")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("危害：")])]),s._v(" "),a("ul",[a("li",[s._v("依赖隐式存在，未来 "),a("code",[s._v("some-package")]),s._v(" 移除 "),a("code",[s._v("lodash")]),s._v(" 会导致崩溃")]),s._v(" "),a("li",[s._v("依赖版本不可控")])]),s._v(" "),a("h3",{attrs:{id:"pnpm-的解决方案-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-的解决方案-2"}},[s._v("#")]),s._v(" pnpm 的解决方案")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("node_modules/\n├── some-package/  (符号链接)\n└── .pnpm/\n    ├── some-package@1.0.0/\n    │   └── node_modules/\n    │       └── lodash/      # 只在 some-package 内可访问\n    └── lodash@4.17.21/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("结果：")]),s._v(" 只有在 "),a("code",[s._v("package.json")]),s._v(" 中声明的依赖才能直接访问")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_4-更好的-monorepo-支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-更好的-monorepo-支持"}},[s._v("#")]),s._v(" 4. 更好的 Monorepo 支持")]),s._v(" "),a("h3",{attrs:{id:"npm-workspaces-vs-pnpm-workspaces"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-workspaces-vs-pnpm-workspaces"}},[s._v("#")]),s._v(" npm workspaces vs pnpm workspaces")]),s._v(" "),a("p",[a("strong",[s._v("pnpm 方式（"),a("code",[s._v("pnpm-workspace.yaml")]),s._v("）：")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("packages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'apps/*'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'packages/*'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("pnpm 优势命令：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" run build          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归运行所有包的 build")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" @acme/ui build  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只构建 ui 包及其依赖")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./apps/**"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只测试 apps 下的所有包")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("npm workspaces 局限：")])]),s._v(" "),a("ul",[a("li",[s._v("缺少高级过滤功能")]),s._v(" "),a("li",[s._v("依赖安装效率不如 pnpm")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_5-严格的依赖隔离"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-严格的依赖隔离"}},[s._v("#")]),s._v(" 5. 严格的依赖隔离")]),s._v(" "),a("h3",{attrs:{id:"npm-的扁平化结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-的扁平化结构"}},[s._v("#")]),s._v(" npm 的扁平化结构")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("node_modules/\n├── react/           # 所有包都能访问\n├── lodash/          # 所有包都能访问\n└── axios/           # 所有包都能访问\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"pnpm-的嵌套-符号链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-的嵌套-符号链接"}},[s._v("#")]),s._v(" pnpm 的嵌套 + 符号链接")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("node_modules/\n├── react → .pnpm/react@18.2.0/node_modules/react\n├── .pnpm/\n│   ├── react@18.2.0/\n│   │   └── node_modules/\n│   │       ├── react/\n│   │       └── loose-envify/  # react 的依赖，项目访问不到\n│   └── lodash@4.17.21/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("strong",[s._v("好处：")])]),s._v(" "),a("ul",[a("li",[s._v("防止意外使用未声明的依赖")]),s._v(" "),a("li",[s._v("更容易排查依赖问题")])]),s._v(" "),a("hr"),s._v(" "),a("h1",{attrs:{id:"对比总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对比总结"}},[s._v("#")]),s._v(" 对比总结")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("特性")]),s._v(" "),a("th",[s._v("npm")]),s._v(" "),a("th",[s._v("pnpm")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("磁盘空间")]),s._v(" "),a("td",[s._v("重复存储")]),s._v(" "),a("td",[s._v("节省 70%+")])]),s._v(" "),a("tr",[a("td",[s._v("安装速度（有缓存）")]),s._v(" "),a("td",[s._v("基准线")]),s._v(" "),a("td",[s._v("快 5-10 倍")])]),s._v(" "),a("tr",[a("td",[s._v("幽灵依赖")]),s._v(" "),a("td",[s._v("存在")]),s._v(" "),a("td",[s._v("完全杜绝")])]),s._v(" "),a("tr",[a("td",[s._v("依赖隔离")]),s._v(" "),a("td",[s._v("扁平化（松散）")]),s._v(" "),a("td",[s._v("严格隔离")])]),s._v(" "),a("tr",[a("td",[s._v("Monorepo")]),s._v(" "),a("td",[s._v("基础支持")]),s._v(" "),a("td",[s._v("高级过滤")])]),s._v(" "),a("tr",[a("td",[s._v("生态兼容")]),s._v(" "),a("td",[s._v("100%")]),s._v(" "),a("td",[s._v("99.9%")])]),s._v(" "),a("tr",[a("td",[s._v("学习成本")]),s._v(" "),a("td",[s._v("-")]),s._v(" "),a("td",[s._v("极低")])])])]),s._v(" "),a("hr"),s._v(" "),a("h1",{attrs:{id:"实际案例对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实际案例对比"}},[s._v("#")]),s._v(" 实际案例对比")]),s._v(" "),a("p",[a("strong",[s._v("场景：10 个 Next.js 项目")])]),s._v(" "),a("h3",{attrs:{id:"使用-npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-npm"}},[s._v("#")]),s._v(" 使用 npm")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("项目1/node_modules/  (350MB)\n项目2/node_modules/  (350MB)\n...\n项目10/node_modules/ (350MB)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("总占用：3.5GB")])]),s._v(" "),a("h3",{attrs:{id:"使用-pnpm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-pnpm"}},[s._v("#")]),s._v(" 使用 pnpm")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("~/.pnpm-store/       (400MB)  # 全局存储去重后的包\n项目1/node_modules/  (符号链接，~5MB)\n项目2/node_modules/  (符号链接，~5MB)\n...\n项目10/node_modules/ (符号链接，~5MB)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("总占用：450MB（节省 87%）")])]),s._v(" "),a("hr"),s._v(" "),a("h1",{attrs:{id:"迁移建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#迁移建议"}},[s._v("#")]),s._v(" 迁移建议")]),s._v(" "),a("p",[s._v("如果您的项目考虑从 npm 迁移到 pnpm：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 全局安装 pnpm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 删除旧依赖")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" node_modules package-lock.json\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 用 pnpm 安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4. 更新脚本（如果使用 npm run）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# package.json 中的 scripts 无需修改")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只需将命令从 npm run xxx 改为 pnpm xxx")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[a("strong",[s._v("注意事项：")])]),s._v(" "),a("ul",[a("li",[s._v("大部分项目可以无缝迁移")]),s._v(" "),a("li",[s._v("极少数依赖扁平化结构的老旧包可能需要配置 "),a("code",[s._v(".npmrc")]),s._v("："),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("public-hoist-pattern[]=*eslint*\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[a("strong",[s._v("总结：")]),s._v(" pnpm 是 npm 的更优选择，几乎没有缺点，唯一考量是团队是否愿意接受新工具。")])])}),[],!1,null,null,null);a.default=e.exports}}]);
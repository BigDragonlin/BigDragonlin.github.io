(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{520:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"使用-luarocks-管理和加载-lua-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-luarocks-管理和加载-lua-模块"}},[s._v("#")]),s._v(" 使用 LuaRocks 管理和加载 Lua 模块")]),s._v(" "),a("p",[s._v("LuaRocks 是 Lua 的包管理器，用于安装和管理 Lua 模块。在这篇文章中，我们将介绍如何使用 LuaRocks 安装和管理 Lua 模块，如何设置环境变量以确保 Lua 能够正确加载这些模块，并展示一些常用模块（如 "),a("code",[s._v("lua-cjson")]),s._v("）的使用示例。此外，我们还将解释一些 LuaRocks 相关目录的含义。")]),s._v(" "),a("h4",{attrs:{id:"_1-安装-luarocks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-luarocks"}},[s._v("#")]),s._v(" 1. 安装 LuaRocks")]),s._v(" "),a("p",[s._v("你可以从 "),a("a",{attrs:{href:"https://luarocks.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("LuaRocks 官方网站"),a("OutboundLink")],1),s._v(" 下载并安装 LuaRocks。安装完成后，可以通过以下命令检查是否安装成功：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("luarocks "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-安装-lua-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-lua-模块"}},[s._v("#")]),s._v(" 2. 安装 Lua 模块")]),s._v(" "),a("p",[s._v("使用 LuaRocks 安装 Lua 模块非常简单。以下是安装 "),a("code",[s._v("lua-cjson")]),s._v(" 模块的示例：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("luarocks "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lua-cjson\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-设置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-设置环境变量"}},[s._v("#")]),s._v(" 3. 设置环境变量")]),s._v(" "),a("p",[s._v("为了确保 Lua 加载器能够找到通过 LuaRocks 安装的模块，我们需要设置 "),a("code",[s._v("LUA_PATH")]),s._v(" 和 "),a("code",[s._v("LUA_CPATH")]),s._v(" 环境变量。这些变量定义了 Lua 脚本和 C 模块的查找路径。")]),s._v(" "),a("h5",{attrs:{id:"在-windows-上设置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-windows-上设置环境变量"}},[s._v("#")]),s._v(" 在 Windows 上设置环境变量")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("打开系统属性，进入“高级”选项卡。")])]),s._v(" "),a("li",[a("p",[s._v("点击“环境变量”。")])]),s._v(" "),a("li",[a("p",[s._v("在“系统变量”中，找到并编辑 "),a("code",[s._v("LUA_PATH")]),s._v(" 和 "),a("code",[s._v("LUA_CPATH")]),s._v(" 变量。如果没有这些变量，点击“新建”来添加。")])]),s._v(" "),a("li",[a("p",[s._v("设置 "),a("code",[s._v("LUA_PATH")]),s._v(" 变量值为：")]),s._v(" "),a("div",{staticClass:"language-plaintext line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-plaintext"}},[a("code",[s._v("C:\\\\Program Files (x86)\\\\Lua\\\\luarocks-3.9.1\\\\systree\\\\share\\\\lua\\\\5.1\\\\?.lua;C:\\\\Program Files (x86)\\\\Lua\\\\luarocks-3.9.1\\\\systree\\\\share\\\\lua\\\\5.1\\\\test\\\\?.lua;;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("设置 "),a("code",[s._v("LUA_CPATH")]),s._v(" 变量值为：")]),s._v(" "),a("div",{staticClass:"language-plaintext line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-plaintext"}},[a("code",[s._v("C:\\\\Program Files (x86)\\\\Lua\\\\luarocks-3.9.1\\\\systree\\\\lib\\\\lua\\\\5.1\\\\?.dll;;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h4",{attrs:{id:"_4-在-lua-脚本中动态设置路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-在-lua-脚本中动态设置路径"}},[s._v("#")]),s._v(" 4. 在 Lua 脚本中动态设置路径")]),s._v(" "),a("p",[s._v("你也可以在 Lua 脚本中手动设置 "),a("code",[s._v("package.path")]),s._v(" 和 "),a("code",[s._v("package.cpath")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-lua line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-lua"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 设置 Lua 模块的路径")]),s._v("\npackage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" package"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('";C:\\\\Program Files (x86)\\\\Lua\\\\luarocks-3.9.1\\\\systree\\\\share\\\\lua\\\\5.1\\\\?.lua;C:\\\\Program Files (x86)\\\\Lua\\\\luarocks-3.9.1\\\\systree\\\\share\\\\lua\\\\5.1\\\\test\\\\?.lua;;"')]),s._v("\npackage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" package"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('";C:\\\\Program Files (x86)\\\\Lua\\\\luarocks-3.9.1\\\\systree\\\\lib\\\\lua\\\\5.1\\\\?.dll"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 引用 lua-cjson 模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" cjson "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cjson"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用 cjson 模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" lua_table "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" json_str "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cjson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("encode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lua_table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JSON String: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" json_str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" decoded_table "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cjson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("decode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json_str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Decoded Lua Table: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" decoded_table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h4",{attrs:{id:"_5-加载某个文件夹及其子文件夹下的-lua-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-加载某个文件夹及其子文件夹下的-lua-文件"}},[s._v("#")]),s._v(" 5. 加载某个文件夹及其子文件夹下的 "),a("code",[s._v(".lua")]),s._v(" 文件")]),s._v(" "),a("p",[s._v("为了加载某个文件夹及其子文件夹下的 "),a("code",[s._v(".lua")]),s._v(" 文件，可以编写一个递归函数遍历该文件夹，并将所有 "),a("code",[s._v(".lua")]),s._v(" 文件路径添加到 "),a("code",[s._v("package.path")]),s._v(" 中：")]),s._v(" "),a("div",{staticClass:"language-lua line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-lua"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" lfs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lfs"')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- LuaFileSystem 库，用于遍历文件夹")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 递归遍历文件夹并收集 .lua 文件路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("collect_lua_files")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("folder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" lua_files "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scan_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" file "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" lfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".."')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" full_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),s._v(" file\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" attr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" lfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("attributes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("full_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"directory"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scan_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("full_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 递归调用，遍历子文件夹")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("elseif")]),s._v(" file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%.lua$"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n                    table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lua_files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" full_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scan_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("folder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" lua_files\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 转换文件路径为 Lua 模块路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("convert_to_module_paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lua_files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" module_paths "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" file "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ipairs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lua_files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" module_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gsub")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gsub")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\\\"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gsub")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%.lua$"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("module_paths"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" module_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" module_paths\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 将文件夹及其子文件夹中的 .lua 文件添加到 package.path 中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add_to_package_path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("folder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" lua_files "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("collect_lua_files")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("folder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" module_paths "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("convert_to_module_paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lua_files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" module_path "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ipairs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("module_paths"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        package"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" package"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('";"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),s._v(" module_path\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 示例：将指定文件夹及其子文件夹中的 .lua 文件添加到 package.path 中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" folder_to_add "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:/path/to/your/lua/folder"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add_to_package_path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("folder_to_add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 现在可以使用 require 加载模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('-- local example = require "example"  -- 这里的 "example" 对应收集到的模块名')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br")])]),a("h4",{attrs:{id:"_6-luarocks-相关目录含义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-luarocks-相关目录含义"}},[s._v("#")]),s._v(" 6. LuaRocks 相关目录含义")]),s._v(" "),a("p",[s._v("当你使用 LuaRocks 安装模块时，模块文件会被放置在特定的目录中。以下是一些重要目录及其含义：")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[a("code",[s._v("C:\\Program Files (x86)\\Lua\\luarocks-3.9.1\\systree\\lib\\luarocks\\rocks-5.1")])])]),s._v(" "),a("p",[s._v("这个目录包含了通过 LuaRocks 安装的各个 Lua 模块及其相关文件。每个模块都有自己独立的文件夹，文件夹内包含模块的源代码、构建脚本和文档。")]),s._v(" "),a("div",{staticClass:"language-plaintext line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-plaintext"}},[a("code",[s._v("C:\\Program Files (x86)\\Lua\\luarocks-3.9.1\\systree\\lib\\luarocks\\rocks-5.1\\\n├── 2048.nvim\n├── lua-cjson\n├── luafilesystem\n├── luaprofiler\n└── manifest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("2048.nvim")]),s._v(": 可能是一个 Neovim 插件或 Lua 模块，用于在 Neovim 编辑器中运行2048游戏或相关功能。")]),s._v(" "),a("li",[a("strong",[s._v("lua-cjson")]),s._v(": 包含 "),a("code",[s._v("lua-cjson")]),s._v(" 模块的源代码、文档和构建文件。")]),s._v(" "),a("li",[a("strong",[s._v("luafilesystem")]),s._v(": 包含 "),a("code",[s._v("LuaFileSystem")]),s._v(" 模块的源代码、文档和构建文件。")]),s._v(" "),a("li",[a("strong",[s._v("luaprofiler")]),s._v(": 包含 "),a("code",[s._v("LuaProfiler")]),s._v(" 模块的源代码、文档和构建文件。")]),s._v(" "),a("li",[a("strong",[s._v("manifest")]),s._v(": 记录了通过 LuaRocks 安装的所有模块的信息，是一个清单文件，用于跟踪安装的模块及其版本。")])])]),s._v(" "),a("li",[a("p",[a("strong",[a("code",[s._v("C:\\Program Files (x86)\\Lua\\luarocks-3.9.1\\systree\\share\\lua\\5.1")])])]),s._v(" "),a("p",[s._v("这个目录包含了通过 LuaRocks 安装的 Lua 脚本和模块。以下是这个目录的截图和解释：")]),s._v(" "),a("div",{staticClass:"language-plaintext line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-plaintext"}},[a("code",[s._v("C:\\Program Files (x86)\\Lua\\luarocks-3.9.1\\systree\\share\\lua\\5.1\\\n├── 2048\n├── cjson\n├── json2lua.lua\n└── lua2json.lua\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("2048")]),s._v(": 可能包含与 2048 游戏相关的 Lua 脚本和资源文件。")]),s._v(" "),a("li",[a("strong",[s._v("cjson")]),s._v(": 包含 "),a("code",[s._v("lua-cjson")]),s._v(" 模块的 Lua 脚本文件，提供核心功能用于 JSON 编码和解码。")]),s._v(" "),a("li",[a("strong",[s._v("json2lua.lua")]),s._v(": 用于将 JSON 数据转换为 Lua 表的 Lua 脚本。")]),s._v(" "),a("li",[a("strong",[s._v("lua2json.lua")]),s._v(": 用于将 Lua 表转换为 JSON 数据的 Lua 脚本。")])])]),s._v(" "),a("li",[a("p",[a("strong",[a("code",[s._v("C:\\Program Files (x86)\\Lua\\luarocks-3.9.1\\systree\\lib\\lua\\5.1")])])]),s._v(" "),a("p",[s._v("这个目录包含了通过 LuaRocks 安装的 C 模块的二进制文件。以下是这个目录的截图和解释：")]),s._v(" "),a("div",{staticClass:"language-plaintext line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-plaintext"}},[a("code",[s._v("C:\\Program Files (x86)\\Lua\\luarocks-3.9.1\\systree\\lib\\lua\\5.1\\\n├── cjson.dll\n├── lfs.dll\n└── profiler.dll\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("cjson.dll")]),s._v(": "),a("code",[s._v("lua-cjson")]),s._v(" 模块的二进制文件，用于 JSON 编码和解码。")]),s._v(" "),a("li",[a("strong",[s._v("lfs.dll")]),s._v(": "),a("code",[s._v("LuaFileSystem")]),s._v(" 模块的二进制文件，用于文件系统操作。")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);